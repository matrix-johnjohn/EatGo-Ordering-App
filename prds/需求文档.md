## 点餐平台需求文档

>本文档旨在明确该应用的功能与非功能需求,为产品设计、开发、测试提供统一的依据,随着移动互联网的普及,用户对高效、便捷的线上点餐服务需求日益增长。为解决传统餐饮中排队市场、点餐效率低下等问题,特开发此点餐app,连接消费者、餐厅与配送服务。
>
>"eatGo"是一款集在线浏览、下单、支付、配送于一体的移动应用。用户可通过app浏览餐厅,自由点餐并享受送餐上门服务。

## 文档概述

| 字段         | 内容                               |
| :----------- | :--------------------------------- |
| 文档名称     | 用户中心模块 - 产品需求文档（PRD） |
| 作者         | 全栈开发-kimo                      |
| 创建时间     | 2025年6月5日                       |
| 当前版本     | v1.0                               |
| 相关版本记录 | 附修订历史表格                     |

## 缓存结构

| key                 | 内容       | 缓存类型   |
| ------------------- | ---------- | ---------- |
| valid_code:${email} | 验证码缓存 | 服务器缓存 |
| token:${email}      | 令牌缓存   | 服务器缓存 |
| info:${email}       | 用户信息   | 服务器缓存 |
| collection          | 用户收藏   | 本地缓存   |



## 数据结构

### 用户表(user)

| 字段名       | 类型      | 描述                        |
| :----------- | :-------- | :-------------------------- |
| id           | number    | 主键                        |
| username     | string    | 用户名                      |
| password     | string    | 用户密码                    |
| email        | string    | 用户邮箱                    |
| balance      | number    | 用户余额                    |
| is_effective | number    | 用户是否有效//0:冻结,1:有效 |
| auth         | number    | 用户权限//0:user,1:admin    |
| create_time  | date_time | 创建时间                    |
| update_time  | date_time | 最后修改时间                |

### 菜品分类表(dish_categorize)

| 字段名      | 类型      | 描述         |
| :---------- | :-------- | :----------- |
| id          | number    | 主键         |
| name        | string    | 分类名       |
| icon        | string    | 分类的icon   |
| banner      | string[]  | 分类轮播图   |
| create_time | date_time | 创建时间     |
| update_time | date_time | 最后修改时间 |

### 菜品标签表(dish_tag)

| 字段名        | 类型      | 描述         |
| :------------ | :-------- | :----------- |
| id            | number    | 主键         |
| name          | string    | 标签名       |
| categorize_id | number    | 分类id       |
| create_time   | date_time | 创建时间     |
| update_time   | date_time | 最后修改时间 |

### 菜品表(dish)

| 字段名           | 类型      | 描述         |
| :--------------- | :-------- | :----------- |
| id               | number    | 主键         |
| title            | string    | 菜品标题     |
| description      | string    | 菜品描述     |
| image            | string    | 菜品图片     |
| price            | number    | 菜品价格     |
| categorize_id    | number    | 分类id       |
| tag_id           | number    | 标签id       |
| collection_count | number    | 收藏次数     |
| create_time      | date_time | 创建时间     |
| update_time      | date_time | 最后修改时间 |

### 用户收藏表(user_collection)

| 字段名      | 类型      | 描述         |
| :---------- | :-------- | :----------- |
| id          | number    | 主键         |
| user_id     | number    | 用户id       |
| dish_id     | number    | 菜品id       |
| create_time | date_time | 创建时间     |
| update_time | date_time | 最后修改时间 |

### 订单表(order)

| 字段名      | 类型      | 描述         |
| :---------- | :-------- | :----------- |
| id          | number    | 主键         |
| user_id     | number    | 用户id       |
| total_price | number    | 总价         |
| status      | number    | 订单状态     |
| create_time | date_time | 创建时间     |
| update_time | date_time | 最后修改时间 |

### 用户评论表(user_comment)

| 字段名      | 类型      | 描述         |
| :---------- | :-------- | :----------- |
| id          | number    | 主键         |
| username    | string    | 用户名       |
| comment     | string    | 评价         |
| user_id     | number    | 用户id       |
| dish_id     | string    | 菜品id       |
| create_time | date_time | 创建时间     |
| update_time | date_time | 最后修改时间 |

### 用户聊天列表(user_chat)

| 字段名      | 类型      | 描述     |
| :---------- | :-------- | :------- |
| id          | number    | 主键     |
| order_id    | number    | 订单id   |
| dish_id     | number    | 菜品id   |
| title       | string    | 菜品标题 |
| image       | string    | 菜品图片 |
| price       | number    | 价格     |
| count       | number    | 菜品数量 |
| create_time | date_time | 创建时间 |

### 聊天表(chat)

| 字段名      | 类型      | 描述         |
| :---------- | :-------- | :----------- |
| id          | number    | 主键         |
| from        | number    | 发送人id     |
| to          | number    | 收件人id     |
| message     | string    | 发送信息     |
| create_time | date_time | 创建时间     |
| update_time | date_time | 最后修改时间 |



## 功能流程图

### 注册业务流程

![注册业务流程图](https://raw.githubusercontent.com/matrix-johnjohn/EatGo-Ordering-App/refs/heads/main/prds/uml/user/%E6%B3%A8%E5%86%8C%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B%E5%9B%BE.png)

### 登录业务流程

![登录业务流程图](https://raw.githubusercontent.com/matrix-johnjohn/EatGo-Ordering-App/refs/heads/main/prds/uml/user/02.登录业务流程图.png)

### 找回密码业务流程

![](https://raw.githubusercontent.com/matrix-johnjohn/EatGo-Ordering-App/refs/heads/main/prds/uml/user/03.找回密码.png)

## 异常与错误提示设计

| 编号 | 错误码 | 错误信息       | 说明                  |
| :--- | :----- | :------------- | :-------------------- |
| E01  | 10001  | 验证码发送失败 | 邮箱非法,请重新输入   |
| E02  | 10002  | 验证码错误     | 验证码非法,请重新输入 |
| E02  | 10003  | 登录错误       | 用户名或密码错误      |
