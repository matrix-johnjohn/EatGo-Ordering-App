## 缓存结构

| key                | 内容       |
| ------------------ | ---------- |
| validCode:${email} | 验证码缓存 |
| token:${email}     | 令牌缓存   |



## 数据结构

### 用户表

| 字段名       | 类型     | 描述         |
| :----------- | :------- | :----------- |
| id           | number   | 主键         |
| uuid         | string   | 用户uuid     |
| username     | string   | 用户名       |
| password     | string   | 用户密码     |
| email        | string   | 用户邮箱     |
| balance      | number   | 用户余额     |
| is_effective | number   | 用户是否有效 |
| create_time  | datetime | 创建时间     |
| update_time  | datetime | 最后修改时间 |

### 用户地址关系表

| 字段名      | 类型     | 描述         |
| :---------- | :------- | :----------- |
| id          | number   | 主键         |
| user_id     | number   | 用户id       |
| province    | string   | 省份         |
| city        | string   | 城市         |
| district    | string   | 区           |
| address     | string   | 门牌号       |
| phone       | string   | 手机号       |
| create_time | datetime | 创建时间     |
| update_time | datetime | 最后修改时间 |



## 功能清单

### 客户端

| 编号 | 功能名称     | 描述                                                         | 优先级 |
| :--- | :----------- | :----------------------------------------------------------- | :----- |
| c-01 | 用户注册     | 提交用户名,邮箱地址,密码,验证码注册账号                      | 高     |
| c-02 | 用户登录     | 提交邮箱地址,密码,登录验证码登录                             | 高     |
| c-03 | 找回密码     | 提交用户名,邮箱地址,密码,验证码找回密码                      | 高     |
| c-04 | 用户身份信息 | 获取用户信息(包括用户名,邮箱,用户状态,用户收藏,用户余额,支付记录等) | 高     |
| c-05 | 充值         | 通过微信或支付宝充值到余额中                                 | 高     |
| c-06 | 用户状态     | 设置用户状态(活跃中,请勿打扰,疲惫)                           | 中     |
| c-07 | 用户商家聊天 | 用户和商家聊天                                               | 中     |
| c-08 | 商家列表     | 显示商家的列表卡片(商家名称,收藏人数,堂食,可配送)            | 中     |
| c-09 | 商家详情     | 商家菜品列表                                                 | 中     |
| c-10 | 点餐         | 选择菜品,数量,取餐方式                                       | 中     |
| c-11 | 订单列表     | 显示用户所有订单                                             | 中     |
| c-12 | 取消订单     | 在订单完成之前取消该订单                                     | 中     |
| c-13 | 收货         | 送达后点击收货                                               | 中     |
| c-14 | 申请退款     | 收货后对菜品不满意申请退款                                   | 中     |
